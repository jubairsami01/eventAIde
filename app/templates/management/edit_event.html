{% extends 'base.html' %}
{% block title %}login to eventAIde{% endblock %}

{% block content %}
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <h2>Edit & Publish Event</h2>
            <p>This event was last updated by {{ last_updated_by.name }} ({{ last_updated_by.email }})</p>
            <form action="{{ url_for('management.edit_event', event_id=drafted_event.event_id) }}" method="post" id="editEventForm">
                <h4>Edit Primary Details</h4>
                <div class="form-group">
                    <label for="name">Event Name</label>
                    <input type="text" class="form-control" id="name" name="name" value="{{ drafted_event.name }}" required>
                </div>
                <div class="form-group mt-2">
                    <label for="description">Description</label>
                    <textarea class="form-control" id="description" name="description" rows="3" required>{{ drafted_event.description }}</textarea>
                </div>
                <div class="form-group mt-2">
                    <label for="start_time">Start Time</label>
                    <input type="datetime-local" class="form-control" id="start_time" name="start_time" value="{{ drafted_event.start_date }}" required>
                </div>
                <div class="form-group mt-2">
                    <label for="end_time">End Time</label>
                    <input type="datetime-local" class="form-control" id="end_time" name="end_time" value="{{ drafted_event.end_date }}" required>
                </div>
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                <button type="submit" class="btn btn-primary mt-2">Update Event</button>
            </form>
            
            <h4 class="mt-4">Assigned Co-Hosts</h4>
            
                {% for cohost in cohosts %}
                <div class="col-md-4">
                    <div class="card mb-3">
                        <div class="card-body">
                            <h5 class="card-title">{{ cohost.name }}</h5>
                            <p class="card-text">{{ cohost.email }}</p>
                            <a href="{{ url_for('management.remove_cohost', event_id=drafted_event.event_id, email=cohost.email) }}" class="btn btn-danger">Remove Co-Host</a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            
            <h4 class="mt-4">Add Co-Hosts</h4>
            <form action="{{ url_for('management.add_cohost', event_id=drafted_event.event_id) }}" method="post" id="addCohostForm">
                <div class="form-group">
                    <label for="cohost_email">Co-Host Email</label>
                    <input type="email" class="form-control" id="cohost_email" name="cohost_email" required>
                </div>
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                <button type="submit" class="btn btn-secondary mt-2">Add Co-Host</button>
            </form>

    </div>
</div>


{% endblock %}